<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-sails/node_modules/sails/lib/hooks/grunt/index.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-sails">npmtest-sails (v0.0.4)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-sails/node_modules/sails/lib/hooks/grunt/index.js</span></h1>
    <h2>
        
        Statements: <span class="metric">2.11% <small>(2 / 95)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 49)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 10)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">2.2% <small>(2 / 91)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-sails/node_modules/sails/lib/hooks/grunt/</a> &#187; index.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353</td><td class="line-coverage"><span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">module.exports = <span class="fstat-no" title="function not covered" >function(sails) {</span>
&nbsp;
  /**
   * Module dependencies
   */
&nbsp;
<span class="cstat-no" title="statement not covered" >  var _ = require('@sailshq/lodash');</span>
<span class="cstat-no" title="statement not covered" >  var Err = require('../../../errors');</span>
<span class="cstat-no" title="statement not covered" >  var path = require('path');</span>
<span class="cstat-no" title="statement not covered" >  var fs = require('fs');</span>
<span class="cstat-no" title="statement not covered" >  var ChildProcess = require('child_process');</span>
&nbsp;
&nbsp;
  /**
   * Grunt hook
   *
   * A core hook for interacting with the Grunt-powered pipeline which
   * is the conventional default in all new Sails apps.
   *
   *
   * @event 'hook:grunt:loaded'
   *        Emitted when the Grunt hook has been automatically loaded by Sails core, and
   *        triggered the callback in its `initialize` function.
   *
   * @event 'hook:grunt:done'
   *        Emitted when the Grunt child process exits with a normal status code.
   *        (in development, this will not fire until the app is lowered, since grunt-contrib-watch
   *         keeps the child process active)
   *
   * @event 'hook:grunt:error'
   *        Emitted when the Grunt child process exits with a non-zero status code.
   *
   *
   * &gt; In development, note that *neither* the `grunt:hook:done`, *nor* the `grunt:hook:done` event will
   * &gt; fire until the app is lowered if you're using the default pipeline.
   * &gt; (This is because `grunt-contrib-watch` keeps the child process active.)
   *
   *
   * @stability 2
   * @see http://sailsjs.org/documentation/concepts/assets
   */
<span class="cstat-no" title="statement not covered" >  return {</span>
&nbsp;
&nbsp;
    /**
     * When this hook is initialized, load this project's Grunt tasks.
     */
    initialize: <span class="fstat-no" title="function not covered" >function(cb) {</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      sails.log.verbose('Loading app Gruntfile...');</span>
&nbsp;
      // Determine the proper Grunt task to run.
<span class="cstat-no" title="statement not covered" >      var gruntTaskListName;</span>
&nbsp;
      // Check to see if the user has specified a grunt task list for the current environment
      // (i.e. sails.config.environment)
      //
      // Note: Your asset pipeline can also be made environment-specific by checking
      // `sails.config.environment` from within the Gruntfile itself, or any task.
      // This convenience feature exists to make it easier to drop in an environment-specific
      // task list without doing any manual config or imperative coding.
      //
      // Docs on how to work with the default Grunt asset pipeline here:
      // http://sailsjs.org/documentation/concepts/assets/default-tasks
<span class="cstat-no" title="statement not covered" >      var pathForEnvSpecificTaskList = path.resolve( sails.config.appPath, path.join('tasks/register/',sails.config.environment + '.js') );</span>
<span class="cstat-no" title="statement not covered" >      if ( fs.existsSync(pathForEnvSpecificTaskList) ) {</span>
<span class="cstat-no" title="statement not covered" >        gruntTaskListName = sails.config.environment;</span>
      }
      // If the environment is "production", use the "prod" tasklist (unless a "production" tasklist exists)
      else <span class="cstat-no" title="statement not covered" >if (sails.config.environment === 'production') {</span>
<span class="cstat-no" title="statement not covered" >        gruntTaskListName = 'prod';</span>
      }
      else {
<span class="cstat-no" title="statement not covered" >        gruntTaskListName = 'default';</span>
      }
&nbsp;
      // Now run the appropriate Grunt task for this environment
      // (spinning up a child process)
<span class="cstat-no" title="statement not covered" >      return this.runTask(gruntTaskListName, cb);</span>
&nbsp;
    },
&nbsp;
&nbsp;
    /**
     * `runTask()`
     *
     * Fork a Grunt child process that runs the specified task.
     *
     * @param {String} taskName
     *        The name of the Grunt task to run.
     *
     * @param {Function} cb
     *        Optional.  Fires when the Grunt task has been started (non-production) or exits successfully (in production).
     *        Note that the `grunt:hook:error` and `grunt:hook:done` events are fired regardless of whether
     *        a callback is provided or not. Also note that this callback is not precisely equivalent to the semantic
     *        of these two events (for backwards compatibility).
     *
     * @api private
     *      (however note that this is called directly by `sails www` in the CLI)
     */
    runTask: <span class="fstat-no" title="function not covered" >function(taskName, cb_afterTaskStarted) {</span>
&nbsp;
      // Determine the path to the root directory of the current running instance
      // of Sails core.
<span class="cstat-no" title="statement not covered" >      var pathToSails = path.resolve(__dirname, '../../../');</span>
&nbsp;
      // If provided task is not a string, fail silently.
      // TODO: handle this more elegantly-- leaving this in as-is to ensure backwards compatiblity,
      // but it should be replaced in a subsequent release with an error instead (b/c )
<span class="cstat-no" title="statement not covered" >      if (!taskName) {</span>
<span class="cstat-no" title="statement not covered" >        taskName = '';</span>
      }
&nbsp;
      // Fork Grunt child process
<span class="cstat-no" title="statement not covered" >      var child = ChildProcess.fork(</span>
&nbsp;
        // Set our Grunt wrapper file in Sails core as the working directory for
        // the Grunt child process.
        path.join(__dirname, 'grunt-wrapper.js'),
&nbsp;
        // Command-line arguments (e.g. `foo bar`) and command-line options (e.g. `--foo="bar"`)
        // to pass to the child process.
        [
          taskName,
          '--pathToSails=' + pathToSails,
&nbsp;
          // Backwards compatibility for v0.9.x
          '--gdsrc=' + pathToSails + '/node_modules'
        ],
&nbsp;
        // Command-line options (e.g. `--foo="bar"`) to pass to the child process.
        {
          silent: true,
          stdio: 'pipe',
          // Pass all current node process arguments to the child process,
          // except the debug-related arguments, see issue #2670
          execArgv: process.execArgv.slice(0).filter(<span class="fstat-no" title="function not covered" >function(param) {</span>
<span class="cstat-no" title="statement not covered" >            return !(new RegExp('--debug(-brk=[0-9]+)?').test(param));</span>
          })
        }
      );
&nbsp;
&nbsp;
      // Initialize local variables which will be used to buffer the
      // incoming output from our Grunt child process.
      //
      // `errorMsg` will end up holding the human-readable error message,
      // while `stackTrace` will end up with our best guess at a reasonable
      // stack trace parsed from the incoming child proc output.
<span class="cstat-no" title="statement not covered" >      var errorMsg = '';</span>
<span class="cstat-no" title="statement not covered" >      var stackTrace = '';</span>
&nbsp;
&nbsp;
      // Receive output as it comes in from the child proc's stdout
      // (e.g. when Grunt does `console.log()`)
<span class="cstat-no" title="statement not covered" >      child.stdout.on('data', <span class="fstat-no" title="function not covered" >function(consoleMsg) {</span></span>
&nbsp;
        // store all the output
<span class="cstat-no" title="statement not covered" >        consoleMsg = consoleMsg.toString();</span>
<span class="cstat-no" title="statement not covered" >        errorMsg += consoleMsg;</span>
&nbsp;
        // Clean out all the whitespace
<span class="cstat-no" title="statement not covered" >        var trimmedStackTrace = (typeof stackTrace === 'string') ? stackTrace : '';</span>
<span class="cstat-no" title="statement not covered" >        trimmedStackTrace = trimmedStackTrace.replace(/[\n\s]*$/, '');</span>
<span class="cstat-no" title="statement not covered" >        trimmedStackTrace = trimmedStackTrace.replace(/^[\n\s]*/, '');</span>
<span class="cstat-no" title="statement not covered" >        var trimmedConsoleMsg = (typeof consoleMsg === 'string') ? consoleMsg : '';</span>
<span class="cstat-no" title="statement not covered" >        trimmedConsoleMsg = trimmedConsoleMsg.replace(/[\n\s]*$/, '');</span>
<span class="cstat-no" title="statement not covered" >        trimmedConsoleMsg = trimmedConsoleMsg.replace(/^[\n\s]*/, '');</span>
&nbsp;
        // Remove '--force to continue' message since it makes no sense
        // in this context:
<span class="cstat-no" title="statement not covered" >        trimmedConsoleMsg = trimmedConsoleMsg.replace(/Use --force to continue\./i, '');</span>
<span class="cstat-no" title="statement not covered" >        trimmedStackTrace = trimmedStackTrace.replace(/Use --force to continue\./i, '');</span>
&nbsp;
        // Find the stack trace related to this warning
<span class="cstat-no" title="statement not covered" >        stackTrace = errorMsg.substring(errorMsg.lastIndexOf('Running "'));</span>
&nbsp;
        // Handle fatal errors, like missing grunt dependency, etc.
<span class="cstat-no" title="statement not covered" >        if (consoleMsg.match(/Fatal error/g)) {</span>
&nbsp;
          // If no Gruntfile exists, don't crash- just display a warning.
<span class="cstat-no" title="statement not covered" >          if (consoleMsg.match(/Unable to find Gruntfile/i)) {</span>
<span class="cstat-no" title="statement not covered" >            sails.log.info('Gruntfile could not be found.');</span>
<span class="cstat-no" title="statement not covered" >            sails.log.info('(no grunt tasks will be run.)');</span>
&nbsp;
            // In production, we consider this the end and trigger the callback if provided.
            // (otherwise, we've already triggered the callback at this point, when the task started)
<span class="cstat-no" title="statement not covered" >            if (sails.config.environment === 'production') {</span>
<span class="cstat-no" title="statement not covered" >              if (_.isFunction(cb_afterTaskStarted)) {  <span class="cstat-no" title="statement not covered" >return cb_afterTaskStarted(); </span> }</span>
              else { <span class="cstat-no" title="statement not covered" >sails.log.verbose('`runTask()` could not find a Gruntfile.'); </span>}
            }
<span class="cstat-no" title="statement not covered" >            return;</span>
          } // &lt;/console message contains "Unable to find Gruntfile"&gt;
&nbsp;
          // Otherwise this is some other kind of fatal error, so log it as a "Grunt aborted" error.
          else {
<span class="cstat-no" title="statement not covered" >            Err.fatal.__GruntAborted__(trimmedConsoleMsg, trimmedStackTrace);</span>
<span class="cstat-no" title="statement not covered" >            return;</span>
          }
&nbsp;
        } // &lt;/console message contains "Fatal error"&gt;
&nbsp;
        // Handle fatal Grunt errors by killing Sails process as well:
        ////////////////////////////////////////////////////////////////////
        //
        // "Aborted due to warnings"
        else <span class="cstat-no" title="statement not covered" >if (consoleMsg.match(/Aborted due to warnings/)) {</span>
<span class="cstat-no" title="statement not covered" >          sails.log.error('** Grunt :: An error occurred. **');</span>
          // sails.log.warn(trimmedStackTrace);
          // sails.emit('hook:grunt:error', trimmedStackTrace);
<span class="cstat-no" title="statement not covered" >          Err.fatal.__GruntAborted__(trimmedConsoleMsg, trimmedStackTrace);</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
        } // &lt;/console message contains "Aborted due to warnings"&gt;
&nbsp;
        // "Warning: EMFILE"
        else <span class="cstat-no" title="statement not covered" >if (consoleMsg.match(/EMFILE/ig)){</span>
<span class="cstat-no" title="statement not covered" >          sails.log.error('** Grunt :: An EMFILE error occurred. **');</span>
<span class="cstat-no" title="statement not covered" >          sails.log.error(</span>
            'Usually this means there are too many files open as per your system settings.\n'+
            'If you are developing on one of the many unix-based operating systems that has\n'+
            'the `ulimit` command, then you might try running: `ulimit -n 1024`.  For more tips,\n'+
            'see https://github.com/balderdashy/sails/issues/3523#issuecomment-175922746.\n'+
            '(command[âŒ˜]+double-click to open links in the terminal)'
          );
<span class="cstat-no" title="statement not covered" >          Err.fatal.__GruntAborted__(trimmedConsoleMsg, trimmedStackTrace);</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
        } // &lt;/console message contains "Warning: EMFILE"&gt;
&nbsp;
        // "ParseError"
        else <span class="cstat-no" title="statement not covered" >if (consoleMsg.match(/ParseError/)) {</span>
<span class="cstat-no" title="statement not covered" >          sails.log.warn('** Grunt :: Parse Warning **');</span>
<span class="cstat-no" title="statement not covered" >          sails.log.warn(trimmedStackTrace);</span>
        } // &lt;/console message contains "ParseError"&gt;
&nbsp;
        // Only display console message if it has content besides whitespace
        //////////////////////////////////////////////////////////////////
        else <span class="cstat-no" title="statement not covered" >if (!consoleMsg.match(/^\s*$/)) {</span>
<span class="cstat-no" title="statement not covered" >          sails.log.verbose('Grunt :: ' + trimmedConsoleMsg);</span>
        } // &lt;/console message has content which is not whitespace&gt;
&nbsp;
      }); // &lt;/ stdout.on('data') &gt;
&nbsp;
&nbsp;
      // Handle errors on the stdout stream
      // (rare- this is mainly to prevent throwing and crashing the process)
<span class="cstat-no" title="statement not covered" >      child.stdout.on('error', <span class="fstat-no" title="function not covered" >function(gruntOutput) {</span></span>
<span class="cstat-no" title="statement not covered" >        sails.log.error('Grunt ::', _sanitize(gruntOutput));</span>
      }); //&lt;/on stdout error&gt;
&nbsp;
      // Receive output from the proc's stderr stream.
      // (e.g. when Grunt does `console.error()`)
<span class="cstat-no" title="statement not covered" >      child.stderr.on('data', <span class="fstat-no" title="function not covered" >function(gruntOutput) {</span></span>
<span class="cstat-no" title="statement not covered" >        gruntOutput = _sanitize(gruntOutput);</span>
        // Ignore the "debugger listening" message from node --debug
<span class="cstat-no" title="statement not covered" >        if (gruntOutput.match(/debugger listening on port/)) {</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
        }
        // Any other stderr output gets logged using `sails.log.error`.
        else {
<span class="cstat-no" title="statement not covered" >          sails.log.error('Grunt ::', gruntOutput);</span>
        }
      }); //&lt;/on stderr data&gt;
&nbsp;
      // Handle errors on the stderr stream.
      // (rare- this is mainly to prevent throwing and crashing the process)
<span class="cstat-no" title="statement not covered" >      child.stderr.on('error', <span class="fstat-no" title="function not covered" >function(gruntOutput) {</span></span>
<span class="cstat-no" title="statement not covered" >        sails.log.error('Grunt ::', _sanitize(gruntOutput));</span>
      }); //&lt;/on stderr error&gt;
&nbsp;
&nbsp;
      // When Grunt child process exits, fire event on `sails` app object.
<span class="cstat-no" title="statement not covered" >      child.on('exit', <span class="fstat-no" title="function not covered" >function(code) {</span></span>
&nbsp;
        // If this is a non-zero status code, emit the 'hook:grunt:error' event.
<span class="cstat-no" title="statement not covered" >        if (code !== 0) {</span>
          // (in production, the callback is called in the appropriate spots above, so
          //  it does not need to be triggered again here)
          // --TODO: make this implementation simpler!  It'll be a breaking change.--
<span class="cstat-no" title="statement not covered" >          return sails.emit('hook:grunt:error');</span>
        }
&nbsp;
        // Otherwise emit 'hook:grunt:done'
<span class="cstat-no" title="statement not covered" >        sails.emit('hook:grunt:done');</span>
&nbsp;
        // Note that, if we're in a production environment, we wait until the Grunt
        // child process actually exits (Grunt task finishes running) before firing
        // the callback passed in to `runTask`.
        // (if this is not production, then we already fired the callback when the
        //  task was first run)
<span class="cstat-no" title="statement not covered" >        if (sails.config.environment === 'production') {</span>
<span class="cstat-no" title="statement not covered" >          if (_.isFunction(cb_afterTaskStarted)) { <span class="cstat-no" title="statement not covered" >return cb_afterTaskStarted(); </span>}</span>
          else { <span class="cstat-no" title="statement not covered" >sails.log.verbose('`runTask()` has finished the Grunt task.'); </span>}
        }
      }); //&lt;/when child process exits&gt;
&nbsp;
      // Since there could be long-running tasks like `grunt-contrib-watch` involved,
      // we'll want the ability to flush our child process later.
      // So we save a reference to it on `sails.childProcesses`.
<span class="cstat-no" title="statement not covered" >      sails.log.verbose('Tracking new grunt child process...');</span>
<span class="cstat-no" title="statement not covered" >      if (!_.isArray(sails.childProcesses)) {</span>
<span class="cstat-no" title="statement not covered" >        var consistencyViolationErr = new Error(</span>
        'Consistency violation: `sails.childProcesses` should exist and be an array.  ' +
        'Instead it\'s type: `' + typeof sails.childProcesses + '` '+
        'This means that either a custom hook or app code has damaged the `sails.childProcesses` array, '+
        'or there is a bug in Sails core.  If you expect the latter, please file an issue in the GitHub repo.'
        );
<span class="cstat-no" title="statement not covered" >        if (_.isFunction(cb_afterTaskStarted)) {  <span class="cstat-no" title="statement not covered" >return cb_afterTaskStarted(consistencyViolationErr); </span> }</span>
        else { <span class="cstat-no" title="statement not covered" >sails.log.error(consistencyViolationErr); </span>}
      }
<span class="cstat-no" title="statement not covered" >      sails.childProcesses.push(child);</span>
&nbsp;
&nbsp;
      // Now that the child process is chugging along, if we are NOT in a production
      // environment, we'll go ahead and fire our callback (since Grunt might just be sitting
      // here backgrounded, assuming the conventional default pipeline is being used with
      // grunt-contrib-watch.)
      //
      // Note that, if we were in a production environment, we'd wait until the Grunt
      // child proc actually finished running before firing our callback.  But we go ahead
      // and fire it here.
<span class="cstat-no" title="statement not covered" >      if (sails.config.environment !== 'production') {</span>
<span class="cstat-no" title="statement not covered" >        if (_.isFunction(cb_afterTaskStarted)) {  <span class="cstat-no" title="statement not covered" >return cb_afterTaskStarted(); </span> }</span>
        else { <span class="cstat-no" title="statement not covered" >sails.log.verbose('`runTask()` has started the Grunt task.'); </span>}
      }
    }
  };
};
&nbsp;
&nbsp;
/**
 * After ensuring a chunk is a string, trim any leading or
 * trailing whitespace.  If chunk cannot be nicely casted to a string,
 * pass it straight through.
 *
 * TODO: use `util.inspect()` and/or `rttc.compile()`to squeeze better string output out of non-strings.
 * TODO: when Lodash is upgraded, use `_.trim()`
 *
 * @param  {*} chunk
 * @return {*}
 */
<span class="fstat-no" title="function not covered" >function _sanitize(chunk) {</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (chunk &amp;&amp; typeof chunk === 'object' &amp;&amp; chunk.toString) {</span>
<span class="cstat-no" title="statement not covered" >    chunk = chunk.toString();</span>
  }
<span class="cstat-no" title="statement not covered" >  if (typeof chunk === 'string') {</span>
<span class="cstat-no" title="statement not covered" >    chunk = chunk.replace(/^[\s\n]*/, '');</span>
<span class="cstat-no" title="statement not covered" >    chunk = chunk.replace(/[\s\n]*$/, '');</span>
  }
<span class="cstat-no" title="statement not covered" >  return chunk;</span>
}
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Wed Apr 19 2017 08:54:00 GMT+0000 (UTC)</div>
</div>
</body>
</html>
