<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-sails/node_modules/sails/lib/hooks/http/start.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-sails">npmtest-sails (v0.0.4)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-sails/node_modules/sails/lib/hooks/http/start.js</span></h1>
    <h2>
        
        Statements: <span class="metric">4.69% <small>(3 / 64)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 36)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 8)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">4.84% <small>(3 / 62)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-sails/node_modules/sails/lib/hooks/http/</a> &#187; start.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * Module dependencies.
 */
&nbsp;
var async = require('async');
&nbsp;
&nbsp;
&nbsp;
module.exports = <span class="fstat-no" title="function not covered" >function (sails) {</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return <span class="fstat-no" title="function not covered" >function startServer (cb) {</span></span>
&nbsp;
    // Used to warn about possible issues if starting the server is taking a long time
<span class="cstat-no" title="statement not covered" >    var liftAbortTimer;</span>
<span class="cstat-no" title="statement not covered" >    var liftTimeout = sails.config.liftTimeout || 4000;</span>
    // TODO: pull this defaulting into `defaults`
    // and also ensure this config is properly documented.
&nbsp;
<span class="cstat-no" title="statement not covered" >    async.auto({</span>
&nbsp;
      // Start Express server
      start: <span class="fstat-no" title="function not covered" >function (next) {</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        var explicitHost = sails.config.explicitHost;</span>
&nbsp;
        // If host is explicitly declared, include it in express's listen() call
<span class="cstat-no" title="statement not covered" >        if (explicitHost) {</span>
<span class="cstat-no" title="statement not covered" >          sails.log.verbose('Restricting access to explicit host: '+explicitHost);</span>
<span class="cstat-no" title="statement not covered" >          sails.hooks.http.server.listen(sails.config.port, explicitHost, next);</span>
        }
        else {
          // Listen for error events that may be emitted as the server attempts to start
<span class="cstat-no" title="statement not covered" >          sails.hooks.http.server.on('error', failedToStart);</span>
<span class="cstat-no" title="statement not covered" >          sails.hooks.http.server.listen(sails.config.port, <span class="fstat-no" title="function not covered" >function(err) {</span></span>
            // Remove the error listener so future error events emitted by the server
            // don't get handled by the "failedToStart" function below.
<span class="cstat-no" title="statement not covered" >            sails.hooks.http.server.removeListener('error', failedToStart);</span>
<span class="cstat-no" title="statement not covered" >            return next(err);</span>
          });
        }
&nbsp;
        // Start timer in case this takes suspiciously long...
<span class="cstat-no" title="statement not covered" >        liftAbortTimer = setTimeout(failedToStart, liftTimeout);</span>
&nbsp;
        // If the server fails to start because of an error, or if it's just taking
        // too long, show some troubleshooting notes and bail out.
<span class="fstat-no" title="function not covered" >        function failedToStart(err) {</span>
&nbsp;
          // If this was called because of an actual error, clear the timeout
          // so failedToStart doesn't get called again.
<span class="cstat-no" title="statement not covered" >          if (err) {</span>
<span class="cstat-no" title="statement not covered" >            clearTimeout(liftAbortTimer);</span>
          }
&nbsp;
          // If sails is exiting already, don't worry about the timer going off.
<span class="cstat-no" title="statement not covered" >          if (sails._exiting) {<span class="cstat-no" title="statement not covered" >return;}</span></span>
&nbsp;
          // Figure out if this user is on Windows
<span class="cstat-no" title="statement not covered" >          var isWin = !!process.platform.match(/^win/);</span>
&nbsp;
          // If server isn't starting, provide general troubleshooting information,
          // sharpened with a few simple heuristics:
<span class="cstat-no" title="statement not covered" >          console.log('');</span>
<span class="cstat-no" title="statement not covered" >          if (err) {</span>
<span class="cstat-no" title="statement not covered" >            sails.log.error('Server failed to start.');</span>
<span class="cstat-no" title="statement not covered" >            if (err.code) {</span>
<span class="cstat-no" title="statement not covered" >              sails.log.error('(received error: ' + err.code + ')');</span>
            }
          } else {
<span class="cstat-no" title="statement not covered" >            sails.log.error('Server is taking a while to start up (it\'s been 4 seconds).');</span>
          }
&nbsp;
<span class="cstat-no" title="statement not covered" >          sails.log.error();</span>
<span class="cstat-no" title="statement not covered" >          sails.log.error('Troubleshooting tips:');</span>
<span class="cstat-no" title="statement not covered" >          sails.log.error();</span>
&nbsp;
          // 0. Just a slow Grunt task
<span class="cstat-no" title="statement not covered" >          if (sails.hooks.grunt &amp;&amp; ! (err &amp;&amp; err.code === 'EADDRINUSE')) {</span>
<span class="cstat-no" title="statement not covered" >            if (process.env.NODE_ENV === 'production') {</span>
<span class="cstat-no" title="statement not covered" >              sails.log.error(</span>
                ' -&gt; Do you have a slow Grunt task?  You are running in production mode where, by default, tasks are configured to minify the JavaScript and CSS/LESS files in your assets/ directory.  Sometimes, these processes can be slow, particularly if you have lots of these types of files.'
              );
            }
            else {
<span class="cstat-no" title="statement not covered" >              sails.log.error(</span>
                ' -&gt; Do you have a slow Grunt task, or lots of assets?'
              );
            }
<span class="cstat-no" title="statement not covered" >            sails.log.error();</span>
          }
&nbsp;
          // 1. Unauthorized
<span class="cstat-no" title="statement not covered" >          if (sails.config.port &lt; 1024) {</span>
<span class="cstat-no" title="statement not covered" >            sails.log.error(</span>
            ' -&gt; Do you have permission to use port ' + sails.config.port + ' on this system?',
            // Don't mention `sudo` to Windows users-- I hear you guys get touchy about that sort of thing :)
            (isWin) ? '' : '(you might try `sudo`)'
            );
&nbsp;
<span class="cstat-no" title="statement not covered" >            sails.log.error();</span>
          }
&nbsp;
          // 2. Invalid or unauthorized explicitHost configuration.
<span class="cstat-no" title="statement not covered" >          if (explicitHost) {</span>
<span class="cstat-no" title="statement not covered" >            sails.log.error(</span>
            ' -&gt; You might remove your explicit host configuration and try lifting again (you specified',
            '`'+explicitHost+'`',
            '.)');
&nbsp;
<span class="cstat-no" title="statement not covered" >            sails.log.error();</span>
          }
&nbsp;
          // 3. Something else is running on this port
<span class="cstat-no" title="statement not covered" >          sails.log.error(</span>
          ' -&gt; Is something else already running on port', sails.config.port,
          (explicitHost ? (' with hostname ' + explicitHost) : '') + '?'
          );
<span class="cstat-no" title="statement not covered" >          sails.log.error();</span>
&nbsp;
          // 4. invalid explicitHost
<span class="cstat-no" title="statement not covered" >          if (!explicitHost) {</span>
<span class="cstat-no" title="statement not covered" >            sails.log.error(</span>
            ' -&gt; Are you deploying on a platform that requires an explicit hostname,',
            'like OpenShift?');
<span class="cstat-no" title="statement not covered" >            sails.log.error(</span>
            '    (Try setting the `explicitHost` config to the hostname where the server will be accessible.)'
            );
<span class="cstat-no" title="statement not covered" >            sails.log.error(</span>
            '    (e.g. `mydomain.com` or `183.24.244.42`)'
            );
          }
<span class="cstat-no" title="statement not covered" >          console.log('');</span>
&nbsp;
          // Lower Sails to do any necessary cleanup
<span class="cstat-no" title="statement not covered" >          sails.lower(<span class="fstat-no" title="function not covered" >function(){</span></span>
            // Exit with a non-zero value to indicate an error
<span class="cstat-no" title="statement not covered" >            process.exit(1);</span>
            // TODO: For a more graceful shutdown, we should instead consider:
            // return next(new Error('blah blah'));
          });
        }//&lt;/failedToStart&gt;
      },
&nbsp;
      verify: ['start', <span class="fstat-no" title="function not covered" >function (next) {</span>
<span class="cstat-no" title="statement not covered" >        var explicitHost = sails.config.explicitHost;</span>
&nbsp;
        // Check for port conflicts
        // Ignore this check if explicit host is set, since other more complicated things might be going on.
<span class="cstat-no" title="statement not covered" >        if( !explicitHost &amp;&amp; !sails.hooks.http.server.address() ) {</span>
<span class="cstat-no" title="statement not covered" >          var portBusyErrorMsg = '';</span>
<span class="cstat-no" title="statement not covered" >          portBusyErrorMsg += 'Trying to start server on port ' + sails.config.port + ' but can\'t...';</span>
<span class="cstat-no" title="statement not covered" >          portBusyErrorMsg += 'Something else is probably running on that port!' + '\n';</span>
<span class="cstat-no" title="statement not covered" >          portBusyErrorMsg += 'Please disable the other server, or choose a different port and try again.';</span>
<span class="cstat-no" title="statement not covered" >          sails.log.error(portBusyErrorMsg);</span>
<span class="cstat-no" title="statement not covered" >          throw new Error(portBusyErrorMsg);</span>
          // TODO: For a more graceful shutdown, we should instead consider:
          // return next(new Error(portBusyErrorMsg));
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        next();</span>
      }]
&nbsp;
    }, <span class="fstat-no" title="function not covered" >function expressListening (err) {</span>
<span class="cstat-no" title="statement not covered" >      clearTimeout(liftAbortTimer);</span>
<span class="cstat-no" title="statement not covered" >      if (err) { <span class="cstat-no" title="statement not covered" >return cb(err); </span>}</span>
&nbsp;
      // Announce that express is now listening on a port
<span class="cstat-no" title="statement not covered" >      sails.emit('hook:http:listening');</span>
<span class="cstat-no" title="statement not covered" >      return cb();</span>
    });
  };
&nbsp;
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Thu Apr 27 2017 16:38:56 GMT+0000 (UTC)</div>
</div>
</body>
</html>
